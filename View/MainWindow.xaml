<Window x:Class="OutfitTool.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:local="clr-namespace:OutfitTool"
        mc:Ignorable="d"
        Title="{DynamicResource Settings}" Height="375" Width="500" StateChanged="Window_StateChanged" Loaded="Window_Loaded" Closed="Window_Closed">
    <DockPanel>


        <StatusBar DockPanel.Dock="Bottom" Height="30">
            <StatusBarItem x:Name="StatusBarItemInfo"></StatusBarItem>
        </StatusBar>

        <Grid>

            <tb:TaskbarIcon 
                        x:Name="TaskbarIcon"
                        Visibility="Hidden"
                        TrayLeftMouseDown="TaskbarIcon_TrayLeftMouseDown" 
                        ToolTipText="Outfit Tool" 
                        IconSource="../Resources/wrench.ico" Margin="717,32,20,333"
                        TrayBalloonTipClicked="clickNotification"
            >
                <tb:TaskbarIcon.ContextMenu>
                    <ContextMenu x:Name="TrayContextMenu">
                    </ContextMenu>
                </tb:TaskbarIcon.ContextMenu>
            </tb:TaskbarIcon>



            <Grid Margin="5">

                <TabControl>

                    <TabItem>
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="3" Text="{DynamicResource Common }" />
                            </StackPanel>
                        </TabItem.Header>
                        <TabItem.Content>
                            <StackPanel Orientation="Vertical">
                                <CheckBox x:Name="minimizeOnClose" Click="Input_SettingsChanged" Content="{DynamicResource HideOnClose }" Margin="0 10 0 2" />
                                <CheckBox x:Name="loadOnSystemStart" Click="Input_SettingsChanged" Content="{DynamicResource LoadOnSystemStart }" Margin="0 2" />
                                <CheckBox x:Name="checkUpdatesOnStart" Click="Input_SettingsChanged" Content="{DynamicResource CheckUpdatesOnStart }" Margin="0 2" />
                                <CheckBox x:Name="installUpdates" Click="Input_SettingsChanged" Content="{DynamicResource AutoinstallUpdates }" Margin="10 2 0 2" />
                                <CheckBox x:Name="installOnlyMinorUpdates" Click="Input_SettingsChanged" Content="{DynamicResource InstallOnlyMinorVersions }" Margin="20 2 0 2" />

                                <Label FontSize="14" Padding="10" Cursor="Hand" Foreground="#FF0000" HorizontalContentAlignment="Center">! Блок обновления пока не работает !</Label>
                            </StackPanel>


                        </TabItem.Content>
                    </TabItem>

                    <TabItem>
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="3" Text="{DynamicResource Updates }" />
                            </StackPanel>
                        </TabItem.Header>
                        <TabItem.Content>
                            <StackPanel Orientation="Vertical">
                                <Label FontSize="10" VerticalContentAlignment="Bottom" Padding="5,5,5,1" Content="{DynamicResource UpdatesRepositoryAddress }" />
                                <TextBox x:Name="updatesRepository" TextChanged="Input_SettingsChanged"></TextBox>
                                <Label x:Name="defaultUpdatesRepository" FontSize="10" VerticalContentAlignment="Bottom" Padding="5,1,5,5" Cursor="Hand" Foreground="#FF06204A" HorizontalContentAlignment="Right" MouseUp="DefaultRepository_MouseUp"></Label>

                                <WrapPanel Background="Black">
                                    <TextBlock 
x:Name="RepositoryStatus"
HorizontalAlignment="Stretch"
Background="Black"
Foreground="Green"
FontFamily="Consolas"
Margin="0"
Padding="5"                                      
TextWrapping="WrapWithOverflow"
FontWeight="Bold"
Text="" />
                                </WrapPanel>
                                
                                
                                
                            </StackPanel>

                        </TabItem.Content>
                    </TabItem>


                    <TabItem>
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="3" Text="{DynamicResource Modules }" />
                            </StackPanel>
                        </TabItem.Header>
                        <TabItem.Content>
                            <Grid>
                                <Grid HorizontalAlignment="Stretch">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition Height="30px" />
                                    </Grid.RowDefinitions>

                                    <ListView x:Name="moduleList" Grid.Row="0" SelectionChanged="moduleList_SelectionChanged" Margin="0,0,0,10">
                                        <ListView.View>
                                            <GridView>
                                                <GridViewColumn DisplayMemberBinding="{Binding name}" Width="150" Header="{DynamicResource Module }" />
                                                <GridViewColumn DisplayMemberBinding="{Binding state}" Width="75" Header="{DynamicResource State }" />
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Row="1">
                                        <Button x:Name="switchModule" IsEnabled="False" Content="{DynamicResource Enable }" Click="switchModule_Click_1" Padding="10 2 10 2"/>
                                        <Button x:Name="moduleSettings" IsEnabled="False" Content="{DynamicResource Settings }" Margin="100,0,0,0" Click="moduleSettings_Click" Padding="10 2 10 2" />
                                    </StackPanel>
                                </Grid>
                            </Grid>

                        </TabItem.Content>
                    </TabItem>
                    <TabItem>
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="3" Text="{DynamicResource HotKeys }" />
                            </StackPanel>
                        </TabItem.Header>
                        <TabItem.Content>
                            <Grid>

                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="30px" />
                                </Grid.RowDefinitions>

                                <ListView x:Name="moduleCommandList" Grid.Row="0">
                                    <ListView.View>
                                        <GridView>
                                            <GridViewColumn Header="Name" Width="220" DisplayMemberBinding="{Binding command.Name}" />
                                            <GridViewColumn Header="Hotkey" Width="100" DisplayMemberBinding="{Binding hotKey}" />
                                        </GridView>
                                    </ListView.View>

                                    <ListView.GroupStyle>
                                        <GroupStyle>
                                            <GroupStyle.HeaderTemplate>
                                                <DataTemplate>
                                                    <TextBlock FontWeight="Bold" FontSize="14" Text="{Binding Name}"/>
                                                </DataTemplate>
                                            </GroupStyle.HeaderTemplate>
                                        </GroupStyle>
                                    </ListView.GroupStyle>
                                </ListView>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Row="1">
                                    <Button x:Name="setHotkey" Content="{DynamicResource SetHotKey }" Click="setHotkey_Click" Padding="10 2 10 2" />
                                    <Button x:Name="resetHotkey" Content="{DynamicResource ClearHotKey }" Margin="80,0,0,0" Click="resetHotkey_Click" Padding="10 2 10 2" />
                                </StackPanel>

                            </Grid>
                        </TabItem.Content>
                    </TabItem>


                    <TabItem>
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="3" Text="{DynamicResource Logs }" />
                            </StackPanel>
                        </TabItem.Header>
                        <TabItem.Content>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="logsBlock" TextWrapping="Wrap" Margin="0,0,0,0" ScrollViewer.CanContentScroll="True" MaxWidth="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=ScrollViewer}}" />
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem.Content>
                    </TabItem>

                </TabControl>

            </Grid>
        </Grid>


    </DockPanel>

</Window>
